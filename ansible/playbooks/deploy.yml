# =============================================================================
# ANSIBLE/PLAYBOOKS/DEPLOY.YML - Playbook de dÃ©ploiement
# =============================================================================
---
- name: ğŸš€ DÃ©ploiement application Fode-DevOps
  hosts: fode_devops_prod
  become: yes
  
  vars:
    app_dir: /var/www/html/app
    
  tasks:
    - name: ğŸ“ CrÃ©ation rÃ©pertoire application
      file:
        path: "{{ app_dir }}"
        state: directory
        owner: apache
        group: apache
        mode: '0755'
        
    - name: ğŸ“„ DÃ©ploiement fichiers application
      template:
        src: "{{ item }}.j2"
        dest: "{{ app_dir }}/{{ item }}"
        owner: apache
        group: apache
        mode: '0644'
      loop:
        - index.html
        - about.html
        
    - name: ğŸ”„ RedÃ©marrage Apache
      systemd:
        name: httpd
        state: restarted
